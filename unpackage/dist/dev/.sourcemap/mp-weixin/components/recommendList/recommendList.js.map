{"version":3,"sources":["webpack:////Users/bytedance/Desktop/project/work-order/components/recommendList/recommendList.vue?e2a9","webpack:////Users/bytedance/Desktop/project/work-order/components/recommendList/recommendList.vue?b3b1","webpack:////Users/bytedance/Desktop/project/work-order/components/recommendList/recommendList.vue?e35d","webpack:////Users/bytedance/Desktop/project/work-order/components/recommendList/recommendList.vue?ce28","uni-app:///components/recommendList/recommendList.vue","webpack:////Users/bytedance/Desktop/project/work-order/components/recommendList/recommendList.vue?4cbd","webpack:////Users/bytedance/Desktop/project/work-order/components/recommendList/recommendList.vue?b8b1"],"names":["name","props","recordid","type","newwork","data","finishReList","messageText","deviceChoose","record_id","device_id","number","cost","notes","searchValue","deviceTree","recomDetail","deviceMap","deviceidMap","deviceAll","deviceSearch","costMap","delindex","allcost","saveDevice","delitem","recomUnit","created","mounted","methods","viewurl","uni","url","success","filePath","fail","chooseDevice","title","searchDevice","console","searchRecom","dellocaldeviceConfirm","dellocalDevice","deleteDeviceAll","devicelist","icon","getWorkdetail","res","device_list","all_cost","obj","initDevice","that","text","value","children","unit_type","num","onnodeclick","Submit","recommendConfirm","isdelete","iscreate","deviceCreate","setTimeout","finishRecom","finishConfirm"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;AACc;;;AAG1E;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,aAAa,4WAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,qXAEN;AACP,KAAK;AACL;AACA,aAAa,8XAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7EA;AAAA;AAAA;AAAA;AAA20B,CAAgB,2yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCmG/1B;EACAA;EACAC;IACAC;MACAC;IACA;IACAC;MACAD;IACA;EACA;EACAE;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACA;EACA;EACAC;IACA;EACA;EACAC;IACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACAC;QACAC;QAAA;QACAC;UACA;YACA;YACAF;cACAG;cACAD;gBAAA;cAAA;YACA;UACA;QACA;QACAE;UACA;QACA;MACA;IACA;IACAC;MACAL;QACAM;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;QACA;UACA;QACA;UACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACAF;MACAR;QACAM;MACA;IACA;IACAK;MACA;MACA;MACA;IACA;IACAC;MACAJ;MACAK;QACAb;UACA;YACAA;cACAM;cACAQ;YACA;UACA;YACAN;UACA;YACAR;cACAM;cACAQ;YACA;UACA;QACA;UACAd;YACAM;YACAQ;UACA;QACA;MACA;IAEA;IACAC;MAAA;MACA;MACA;MACAf;QACAM;MACA;MACAN;QACA;UACAA;YACAc;YACAR;UACA;QACA;UAEAN;UACA,qBAGAgB;YAFAC;YACAC;UAEAV;UACA;YACA;UACA;UACAS;YACA;YACAE;YACAA;YACAA;YACAA;YACA;YACA;UACA;UACA;UACA;QACA;UACAnB;YACAc;YACAR;UACA;QACA;MACA;QACAN;UACAc;UACAR;QACA;MACA;IACA;IACAc;MAAA;MACA;MACA;MACApB;QACA;UACAxB;UACA;QACA;UACA6C;UACAA;UACAL;YACAK;YACAA;YACAA;YACA;cACA;gBACA;cACA;gBACA;cACA;YACA;YACA;cACA;gBACAC;gBACAC;gBACAC;kBACAF;kBACAC;kBACA1C;kBACA4C;gBACA;cACA;cACAC;cACAL;YACA;cACAA;gBACA;kBACAjD;oBACAkD;oBACAC;oBACA1C;oBACA4C;kBACA;gBACA;cACA;YACA;YACA;UACA;QACA;UACA;UACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAE;MACAnB;MACAA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACAA;QACA;MACA;IACA;IACAoB;MACA;MACA;MACA;MACAT;MACAA;MACAA;MACAA;MACA;QACAnB;UACAc;UACAR;QACA;QACA;MACA;MACA;QACAN;UACAc;UACAR;QACA;QACA;MACA;MACAa;MACA;MACA;MACAX;MACA;MACAA;MACAR;QACAM;MACA;IACA;IACAuB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA/B;kBACAM;kBACAQ;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IACAkB;MAAA;MACA;MACAhC;QACAM;MACA;MACA;QACA;UACA5B;QACA;QACA;MACA;MACAsB;QACA1B;QACAO;MACA;QACA;UACAmB;YACAM;YACAQ;UACA;QACA;UACAd;YACAM;UACA;UACA2B;YACA;UACA;QACA;UACAjC;YACAM;YACAQ;UACA;QACA;MACA;QACAd;UACAM;UACAQ;QACA;MACA;IACA;IACAoB;MACA;IACA;IACAC;MACAnC;QACAM;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACvbA;AAAA;AAAA;AAAA;AAA0iD,CAAgB,06CAAG,EAAC,C;;;;;;;;;;;ACA9jD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/recommendList/recommendList.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./recommendList.vue?vue&type=template&id=5a57698c&\"\nvar renderjs\nimport script from \"./recommendList.vue?vue&type=script&lang=js&\"\nexport * from \"./recommendList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./recommendList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/recommendList/recommendList.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./recommendList.vue?vue&type=template&id=5a57698c&\"","var components\ntry {\n  components = {\n    uniCard: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-card/components/uni-card/uni-card\" */ \"@/uni_modules/uni-card/components/uni-card/uni-card.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniDataPicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker\" */ \"@/uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker.vue\"\n      )\n    },\n    uniNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-number-box/components/uni-number-box/uni-number-box\" */ \"@/uni_modules/uni-number-box/components/uni-number-box/uni-number-box.vue\"\n      )\n    },\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniPopupDialog: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup-dialog/components/uni-popup-dialog/uni-popup-dialog\" */ \"@/uni_modules/uni-popup-dialog/components/uni-popup-dialog/uni-popup-dialog.vue\"\n      )\n    },\n    uniPopupMessage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup-message/components/uni-popup-message/uni-popup-message\" */ \"@/uni_modules/uni-popup-message/components/uni-popup-message/uni-popup-message.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.deviceSearch.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./recommendList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./recommendList.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"recommend-list-page\">\n\t\t<uni-card margin=\"2px\">\n\t\t\t<view class=\"top-button\">\n\t\t\t\t<view class=\"search-button\" @click=\"searchRecom\">\n\t\t\t\t\t<uni-icons type=\"search\" size=\"16\"></uni-icons>\n\t\t\t\t\t<text>查找</text>\n\t\t\t\t</view>\n\t\t\t\t<view @click=\"viewurl\" class=\"search-button\"><uni-icons type=\"wallet-filled\"></uni-icons> <text>套餐详情 </text></text></view>\n\t\t\t</view>\n\t\t\t<view>\n\t\t\t\t<uni-data-picker ref=\"picker\" placeholder=\"请选择设备类型\" popup-title=\"请选择设备\" :step-searh=\"false\"\n\t\t\t\t\t:localdata=\"deviceTree\" v-model=\"deviceChoose.device_id\" @nodeclick=\"onnodeclick\">\n\t\t\t\t</uni-data-picker>\n\t\t\t</view>\n\t\t\t<view class=\"recom-detail\">\n\t\t\t\t<text>单价:{{recomDetail}}</text>\n\t\t\t</view>\n\t\t\t<view class=\"number-box\">\n\t\t\t\t<uni-number-box :step=\"0.1\" v-model=\"deviceChoose.number\" padding />\n\t\t\t\t<text> {{recomUnit}}</text>\n\t\t\t</view>\n\t\t\t<view class=\"notes\">\n\t\t\t\t<text>备注: </text>\n\t\t\t\t<uni-easyinput maxlength=\"100\" type=\"textarea\" v-model=\"deviceChoose.notes\" placeholder=\"请输人备注信息\">\n\t\t\t\t</uni-easyinput>\n\t\t\t</view>\n\t\t\t<button class=\"add-button\" @click=\"Submit\">添加</button>\n\t\t</uni-card>\n\t\t<uni-card margin=\"2px\">\n\t\t\t<view>\n\t\t\t\t<text>清单列表(点击进行删除)</text>\n\t\t\t</view>\n\t\t\t<!-- <uni-list>\n\t\t\t\t<uni-list-item v-for=\"(item, index) in finishReList\" :key=\"index\" :title=\"deviceidMap[item.device_id]\"\n\t\t\t\t\t:rightText=\"'数量:' + item.number\" showArrow clickable @click=\"dellocalDevice(index, item)\">\n\t\t\t\t</uni-list-item>\n\t\t\t</uni-list> -->\n\t\t\t<view class=\"recom-list\">\n\t\t\t\t<view class=\"recom-item\" v-for=\"(item, index) in finishReList\" :key=\"index\"\n\t\t\t\t\t@click=\"dellocalDevice(index, item)\">\n\t\t\t\t\t<view class=\"title\">{{deviceidMap[item.device_id]}}</view>\n\t\t\t\t\t<view class=\"cost\">单价: {{item.cost}}</view>\n\t\t\t\t\t<view class=\"number\">数量: {{item.number}}\n\t\t\t\t\t\t<uni-icons type=\"right\" size=\"14\" color=\"#9c9c9c\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"recom-detail\">\n\t\t\t\t<text>总价:{{allcost}}</text>\n\t\t\t</view>\n\t\t</uni-card>\n\t\t<button class=\"button\" @click=\"finishRecom\">上传推荐清单</button>\n\t\t<!-- <view>\n\t\t\t<uni-popup ref=\"recommendDialog\" type=\"dialog\">\n\t\t\t\t<uni-popup-dialog type=\"info\" cancelText=\"关闭\" confirmText=\"同意\" title=\"通知\" content=\"是否确认添加\"\n\t\t\t\t\t@confirm=\"recommendConfirm\"></uni-popup-dialog>\n\t\t\t</uni-popup>\n\t\t</view> -->\n\t\t<view>\n\t\t\t<uni-popup ref=\"finishDialog\" type=\"dialog\">\n\t\t\t\t<uni-popup-dialog type=\"info\" cancelText=\"关闭\" confirmText=\"同意\" title=\"通知\" content=\"是否确认提交\"\n\t\t\t\t\t@confirm=\"finishConfirm\"></uni-popup-dialog>\n\t\t\t</uni-popup>\n\t\t</view>\n\t\t<view>\n\t\t\t<uni-popup ref=\"deldeviceDialog\" type=\"dialog\">\n\t\t\t\t<uni-popup-dialog type=\"info\" cancelText=\"关闭\" confirmText=\"同意\" title=\"通知\" content=\"是否确认删除\"\n\t\t\t\t\t@confirm=\"dellocaldeviceConfirm\"></uni-popup-dialog>\n\t\t\t</uni-popup>\n\t\t</view>\n\t\t<view>\n\t\t\t<!-- 提示信息弹窗 -->\n\t\t\t<uni-popup ref=\"errMessage\" type=\"message\">\n\t\t\t\t<uni-popup-message type=\"error\" :message=\"messageText\" :duration=\"500\"></uni-popup-message>\n\t\t\t</uni-popup>\n\t\t</view>\n\t\t<view>\n\t\t\t<uni-popup ref=\"searchPopup\" background-color=\"#fff\">\n\t\t\t\t<view class=\"search-content\">\n\t\t\t\t\t<view class=\"search-input\">\n\t\t\t\t\t\t<uni-easyinput @change=\"searchDevice\" suffixIcon=\"search\" v-model=\"searchValue\"\n\t\t\t\t\t\t\tplaceholder=\"请输入设备名\" @iconClick=\"searchDevice\">\n\t\t\t\t\t\t</uni-easyinput>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"search-area\">\n\t\t\t\t\t\t<view class=\"device-list\" v-for=\"item in deviceSearch\" :key=\"item.device_id\"\n\t\t\t\t\t\t\t@click=\"chooseDevice(item)\">\n\t\t\t\t\t\t\t<text>{{item.device_type}} /{{item.name}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"empty\" v-if=\"deviceSearch.length == 0\">查找设备为空</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</uni-popup>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tname: \"recommendList\",\n\t\tprops: {\n\t\t\trecordid: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tnewwork: {\n\t\t\t\ttype: Number\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tfinishReList: [],\n\t\t\t\tmessageText: \"\",\n\t\t\t\tdeviceChoose: {\n\t\t\t\t\trecord_id: this.recordid,\n\t\t\t\t\tdevice_id: null,\n\t\t\t\t\tnumber: 0.0,\n\t\t\t\t\tcost: 0,\n\t\t\t\t\tnotes: \"\"\n\t\t\t\t},\n\t\t\t\tsearchValue: \"\",\n\t\t\t\tdeviceTree: [],\n\t\t\t\trecomDetail: \"\",\n\t\t\t\tdeviceMap: {},\n\t\t\t\tdeviceidMap: {},\n\t\t\t\tdeviceAll: [],\n\t\t\t\tdeviceSearch: [],\n\t\t\t\tcostMap: {},\n\t\t\t\tdelindex: null,\n\t\t\t\tallcost: 0.0,\n\t\t\t\tsaveDevice: [],\n\t\t\t\tdelitem: {},\n\t\t\t\trecomUnit: \"\"\n\t\t\t}\n\t\t},\n\t\t//asnyc原理还需要理解透彻\n\t\t//为了解决时间上的错误，运用两个生命周期\n\t\tcreated() {\n\t\t\tthis.initDevice()\n\t\t},\n\t\tmounted() {\n\t\t\tif (this.newwork == 2) {\n\t\t\t\tthis.getWorkdetail()\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t// 查看套餐详情\n\t\t\tviewurl() {\n\t\t\t\tuni.downloadFile({\n\t\t\t\t\turl: 'https://gd.jxiot.top/static/excel/device-detail.xlsx', // 文件下载路径\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\t//保存成功并打开文件\n\t\t\t\t\t\t\tuni.openDocument({\n\t\t\t\t\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\t\t\t\t\tsuccess: (res) => console.log('成功打开文件')\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\tthis.$u.toast('下载失败');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tchooseDevice(item) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"选择成功\"\n\t\t\t\t})\n\t\t\t\tthis.deviceChoose.device_id = item.device_id\n\t\t\t\tthis.deviceChoose.cost = item.cost\n\t\t\t\tthis.recomDetail = item.cost\n\t\t\t\tthis.recomUnit = item.unit_type\n\t\t\t\tthis.$refs.searchPopup.close()\n\t\t\t},\n\t\t\tsearchDevice() {\n\t\t\t\tlet work = this.deviceAll.filter(item => {\n\t\t\t\t\tconsole.log(item.name.indexOf(this.searchValue))\n\t\t\t\t\tif (item.name.indexOf(this.searchValue) != -1) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.deviceSearch = work\n\t\t\t},\n\t\t\tsearchRecom() {\n\t\t\t\tthis.$refs.searchPopup.open()\n\t\t\t},\n\t\t\tdellocaldeviceConfirm() {\n\t\t\t\tthis.finishReList.splice(this.delindex, 1)\n\t\t\t\tthis.allcost -= parseFloat((this.costMap[`${this.delitem.device_id}`] * this.delitem.number).toFixed(2))\n\t\t\t\tconsole.log((this.costMap[`${this.delitem.device_id}`] * this.delitem.number).toFixed(2))\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"删除成功\"\n\t\t\t\t})\n\t\t\t},\n\t\t\tdellocalDevice(index, item) {\n\t\t\t\tthis.delindex = index\n\t\t\t\tthis.delitem = item\n\t\t\t\tthis.$refs.deldeviceDialog.open()\n\t\t\t},\n\t\t\tdeleteDeviceAll(devicelist) {\n\t\t\t\tconsole.log(\"delete\")\n\t\t\t\tdevicelist.map((item) => {\n\t\t\t\t\tuni.$http.get(`/devicelist/delete/${item.id}`).then(res => {\n\t\t\t\t\t\tif (res.data.code == 400) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: res.data.errmsg,\n\t\t\t\t\t\t\t\ticon: \"error\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else if (res.data.code == 0) {\n\t\t\t\t\t\t\tconsole.log(res.data.errmsg)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: \"未知错误\",\n\t\t\t\t\t\t\t\ticon: \"error\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}, err => {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"系统错误\",\n\t\t\t\t\t\t\ticon: \"error\"\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tgetWorkdetail() {\n\t\t\t\tconst that = this\n\t\t\t\tconst record_id = this.deviceChoose.record_id\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: \"数据加载中\"\n\t\t\t\t})\n\t\t\t\tuni.$http.get(`/info/${record_id}`).then(res => {\n\t\t\t\t\tif (res.data.code == 400) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'error',\n\t\t\t\t\t\t\ttitle: res.data.errmsg\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (res.data.code == 0) {\n\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tdevice_list,\n\t\t\t\t\t\t\tall_cost\n\t\t\t\t\t\t} = res.data.data\n\t\t\t\t\t\tconsole.log(device_list)\n\t\t\t\t\t\tif (all_cost != null) {\n\t\t\t\t\t\t\tthis.allcost = all_cost\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdevice_list.forEach((item) => {\n\t\t\t\t\t\t\tconst obj = {}\n\t\t\t\t\t\t\tobj.record_id = record_id\n\t\t\t\t\t\t\tobj.number = item.number\n\t\t\t\t\t\t\tobj.device_id = that.deviceMap[item.name]\n\t\t\t\t\t\t\tobj.cost = item.cost\n\t\t\t\t\t\t\t// that.allcost += that.costMap[item.name]*obj.number\n\t\t\t\t\t\t\tthis.finishReList.push(obj)\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.saveDevice = device_list\n\t\t\t\t\t\t// this.deleteDeviceAll(device_list)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'error',\n\t\t\t\t\t\t\ttitle: \"未知错误\"\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}, err => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'error',\n\t\t\t\t\t\ttitle: \"系统错误\"\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\tinitDevice() {\n\t\t\t\tlet num = 10000\n\t\t\t\tconst that = this\n\t\t\t\tuni.$http.get(\"/device/all/\").then(res => {\n\t\t\t\t\tif (res.data.code == 400) {\n\t\t\t\t\t\tmessageText = res.data.errmsg\n\t\t\t\t\t\tthis.$refs.errMessage.open\n\t\t\t\t\t} else if (res.data.code == 0) {\n\t\t\t\t\t\tthat.deviceAll = res.data.sub_data.subs\n\t\t\t\t\t\tthat.deviceSearch = that.deviceAll\n\t\t\t\t\t\tres.data.sub_data.subs.forEach((item) => {\n\t\t\t\t\t\t\tthat.$set(that.deviceMap, item.name, item.device_id)\n\t\t\t\t\t\t\tthat.$set(that.deviceidMap, `${item.device_id}`, item.name)\n\t\t\t\t\t\t\tthat.$set(that.costMap, `${item.device_id}`, item.cost)\n\t\t\t\t\t\t\tlet istype = that.deviceTree.some(type => {\n\t\t\t\t\t\t\t\tif (type) {\n\t\t\t\t\t\t\t\t\treturn type.text == item.device_type\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (!istype) {\n\t\t\t\t\t\t\t\tconst devicetypeobj = {\n\t\t\t\t\t\t\t\t\ttext: item.device_type,\n\t\t\t\t\t\t\t\t\tvalue: num,\n\t\t\t\t\t\t\t\t\tchildren: [{\n\t\t\t\t\t\t\t\t\t\ttext: item.name,\n\t\t\t\t\t\t\t\t\t\tvalue: item.device_id,\n\t\t\t\t\t\t\t\t\t\tcost: item.cost,\n\t\t\t\t\t\t\t\t\t\tunit_type: item.unit_type\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnum = num + 1\n\t\t\t\t\t\t\t\tthat.deviceTree.push(devicetypeobj)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthat.deviceTree.forEach((type) => {\n\t\t\t\t\t\t\t\t\tif (type.text == item.device_type) {\n\t\t\t\t\t\t\t\t\t\ttype.children.push({\n\t\t\t\t\t\t\t\t\t\t\ttext: item.name,\n\t\t\t\t\t\t\t\t\t\t\tvalue: item.device_id,\n\t\t\t\t\t\t\t\t\t\t\tcost: item.cost,\n\t\t\t\t\t\t\t\t\t\t\tunit_type: item.unit_type\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// console.log(that.deviceTree)\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.messageText = \"未知错误\"\n\t\t\t\t\t\tthis.$refs.errMessage.open()\n\t\t\t\t\t}\n\t\t\t\t}, err => {\n\t\t\t\t\tthis.messageText = \"系统错误\"\n\t\t\t\t\tthis.$refs.errMessage.open()\n\t\t\t\t})\n\t\t\t},\n\t\t\tonnodeclick(e) {\n\t\t\t\tconsole.log(this.deviceTree)\n\t\t\t\tconsole.log(e)\n\t\t\t\tif (e.cost == undefined) {\n\t\t\t\t\tthis.recomDetail = \"\"\n\t\t\t\t\tthis.recomUnit = \"\"\n\t\t\t\t\tthis.$refs.picker.show()\n\t\t\t\t} else {\n\t\t\t\t\tthis.recomDetail = e.cost\n\t\t\t\t\tthis.deviceChoose.cost = e.cost\n\t\t\t\t\tconsole.log(e)\n\t\t\t\t\tthis.recomUnit = e.unit_type\n\t\t\t\t}\n\t\t\t},\n\t\t\tSubmit() {\n\t\t\t\t//对原对象进行深拷贝\n\t\t\t\t//运用Object.assign会发生错误\n\t\t\t\tconst obj = {}\n\t\t\t\tobj.number = this.deviceChoose.number\n\t\t\t\tobj.cost = this.deviceChoose.cost\n\t\t\t\tobj.device_id = this.deviceChoose.device_id\n\t\t\t\tobj.notes = this.deviceChoose.notes\n\t\t\t\tif (obj.device_id == null) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: \"error\",\n\t\t\t\t\t\ttitle: \"请选择设备\"\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (obj.number <= 0) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: \"error\",\n\t\t\t\t\t\ttitle: \"数量不能为0\"\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tobj.record_id = this.deviceChoose.record_id\n\t\t\t\tthis.allcost += parseFloat((this.costMap[`${obj.device_id}`] * obj.number).toFixed(2))\n\t\t\t\tthis.allcost = parseFloat(this.allcost.toFixed(2))\n\t\t\t\tconsole.log((this.costMap[`${obj.device_id}`] * obj.number).toFixed(2))\n\t\t\t\tthis.finishReList.push(obj)\n\t\t\t\tconsole.log(this.finishReList)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"成功\"\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync recommendConfirm() {\n\t\t\t\ttry {\n\t\t\t\t\tlet isdelete = await this.deleteDeviceAll(this.saveDevice)\n\t\t\t\t\tlet iscreate = await this.deviceCreate()\n\t\t\t\t} catch (err) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"错误\",\n\t\t\t\t\t\ticon: \"error\"\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tdeviceCreate() {\n\t\t\t\tconst that = this\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: \"正在添加中\"\n\t\t\t\t})\n\t\t\t\tif (this.finishReList.length == 0) {\n\t\t\t\t\tthis.finishReList.push({\n\t\t\t\t\t\trecord_id: this.recordid\n\t\t\t\t\t})\n\t\t\t\t\tthis.allcost = 0\n\t\t\t\t}\n\t\t\t\tuni.$http.post(\"/devicelist/create/\", {\n\t\t\t\t\tdata: this.finishReList,\n\t\t\t\t\tcost: this.allcost\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.data.code == 400) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.errmsg,\n\t\t\t\t\t\t\ticon: \"error\"\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (res.data.code == 0) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"清单上传成功\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.$emit(\"finishStepfour\")\n\t\t\t\t\t\t}, 100)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"未知错误\",\n\t\t\t\t\t\t\ticon: \"error\"\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}, err => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"系统错误\",\n\t\t\t\t\t\ticon: \"error\"\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\tfinishRecom() {\n\t\t\t\tthis.$refs.finishDialog.open()\n\t\t\t},\n\t\t\tfinishConfirm() {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `提交成功`\n\t\t\t\t})\n\t\t\t\tthis.recommendConfirm()\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.recommend-list-page {\n\t\t.notes {\n\t\t\tdisplay: flex;\n\t\t\tmargin: 20rpx 10rpx 0px 20rpx;\n\n\t\t\ttext {\n\t\t\t\tmargin-right: 10rpx;\n\t\t\t}\n\t\t}\n\n\t\t.recom-list {\n\n\t\t\t.recom-item {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tborder-bottom: 1px solid gainsboro;\n\t\t\t\tpadding: 10px 20px;\n\n\t\t\t\t.title {\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tcolor: #323232;\n\t\t\t\t\twidth: 170rpx;\n\t\t\t\t}\n\n\t\t\t\t.cost,\n\t\t\t\t.number {\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tcolor: #9c9c9c;\n\t\t\t\t}\n\n\t\t\t\t.uni-icons {\n\t\t\t\t\tmargin-left: 20rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.search-button {\n\t\t\ttext-align: center;\n\t\t\t// width: 120rpx;\n\t\t\tmargin: 10px 0;\n\t\t\tbackground-color: aqua;\n\t\t\tborder-radius: 5px;\n\t\t\tpadding: 8rpx 10rpx;\n\t\t\tcolor: #323232;\n\t\t}\n\n\t\t.search-content {\n\t\t\tpadding: 20px;\n\t\t\tborder-radius: 10px;\n\n\t\t\t.search-area {\n\t\t\t\twidth: 450rpx;\n\t\t\t\tmargin: 20rpx 5rpx;\n\t\t\t\theight: 320rpx;\n\t\t\t\toverflow-y: scroll;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tcolor: #8a8a8a;\n\n\t\t\t\t.device-list {\n\t\t\t\t\tpadding: 8rpx 0;\n\t\t\t\t\tborder-bottom: 1px solid #ebebeb;\n\t\t\t\t}\n\n\t\t\t\t.empty {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tcolor: #6c6c6c;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.top-button{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t}\n\n\t\t.number-box {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tmargin: 20rpx;\n\n\t\t\ttext {\n\t\t\t\tmargin-left: 20rpx;\n\t\t\t}\n\t\t}\n\n\t\t.recom-detail {\n\t\t\tmargin: 20rpx;\n\t\t\theight: 40rpx;\n\t\t}\n\n\n\t\t.add-button {\n\t\t\tbackground-color: #666;\n\t\t\tcolor: #fff;\n\t\t\theight: 60rpx;\n\t\t\twidth: 200rpx;\n\t\t\tline-height: 60rpx;\n\t\t\tcolor: white;\n\t\t\tfont-size: 14px;\n\t\t\tmargin: 70rpx auto;\n\t\t}\n\n\t\t.button {\n\t\t\tbackground-color: $work-color-main;\n\t\t\theight: 70rpx;\n\t\t\twidth: 400rpx;\n\t\t\tline-height: 70rpx;\n\t\t\tcolor: white;\n\t\t\tfont-size: 14px;\n\t\t\tmargin: 70rpx auto;\n\t\t}\n\t}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./recommendList.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./recommendList.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1712395639388\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}